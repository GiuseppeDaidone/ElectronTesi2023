<!DOCTYPE html>
<html>
    <head>
        <title>Real-time Chat App</title>
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
        <style>
            body {
                margin: 0;
                font-family: sans-serif;
            }
            
            form {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                display: flex;
                box-sizing: border-box;
                padding: 0.25rem;
            }
            
            form input {
                border: 0;
                padding: 0.5rem;
                width: 100%;
                outline: 0;
                margin-right: 0.5rem;
                border-radius: 0.25rem;
                background: #ccc;
            }
            
            form button {
                width: 6rem;
                background-color: #1b8c00;
                color: white;
                border: none;
                padding: 0.5rem;
                cursor: pointer;
                border-radius: 0.25rem;
                text-transform: uppercase;
            }
            
            form button:hover {
                background-color: #166d01;
            }
            
            .messages {
                margin: 0;
                padding: 0;
                margin-bottom: 3rem;
            }
            
            .messages li {
                padding: 0.5rem;
            }
            
            .messages li:nth-child(odd) {
                background: #eee;
            }

            .login {
                position: fixed;
                top: 0;
                width: 100%;
                height: 10%;
                display: flex;
                box-sizing: border-box;
                padding: 0.25rem;
            }

            fieldset {
                position: fixed;
                width: 50%;
                display: flex;
                box-sizing: border-box;
                margin-right: 0.5rem;
                padding: 0.5rem;
            }
        </style>
    </head>
    <body>
        <ul class="messages"></ul>
        <form class="login">
            <fieldset>
                <legend>Login</legend>
                <input type="text" class="username" id="username" autofocus>
                <button class="accedi">Accedi</button>
            </fieldset>
        </form>
        <form class="form">
            <label for=".input" class="label"></label>
            <input type="text" class="input" autocomplete="off" autofocus disabled="disabled"/>
            <button class="button" disabled="disabled">Send</button>
        </form>
        <script>
            const form = document.querySelector(".form");
            const label = document.querySelector(".label");
            const input = document.querySelector(".input");
            const button = document.querySelector(".button");
            const messages = document.querySelector(".messages");
            //const username = prompt("Please enter a username: ", "");
            // Prompt da sostituire con un alternativa
            let username;
            const formLogin = document.querySelector(".login");
            const inputLogin = document.querySelector(".username");
            const buttonLogin = document.querySelector(".accedi");

            formLogin.addEventListener("submit", function(event) {
                event.preventDefault();
                username = inputLogin.value;
                label.innerHTML = username;
                formLogin.innerHTML = "";
                addMessage("You have joined the chat as '" + username  + "'.");
                input.removeAttribute("disabled");
                button.removeAttribute("disabled");
            });
            
            form.addEventListener("submit", function(event) {
                event.preventDefault();

                addMessage(username + ": " + input.value);

                input.value = "";
                return false;
            }, false);

            function addMessage(message) {
                const li = document.createElement("li");
                li.innerHTML = message;
                messages.appendChild(li);
                window.scrollTo(0, document.body.scrollHeight);
            }
        </script>
    </body>
</html>